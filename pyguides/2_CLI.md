# Работа в командной строке

Работа в командной строке широко применяется везде. Помимо запуска скриптов, в командной строке можно передавать аргументы для скриптов, перенаправлять потоки ввода/вывода в файлы и вообще много-много всего.

## Command line arguments

Сейчас посмотрим в сторону аргументов командной строки.

Аргументы командной строки - это флаги, которые передаются программе-скрипту во время её исполнения. Они содержат дополнительную информацию, необходимую для корректной работы программы. Эти флаги нужны не всем программам, вы как разработчик можете решать использовать их или нет, но наверняка вы с ними встретитесь и ни раз :satisfied:.

Аргументы, переданные из командной строки, позволяют использовать различные входные данные без изменения самого кода. Очень похоже на аргументы функции, кстати.

Такие аргументы могут содержать путь до изображения или видео, или путь до файла настроек, или режим работы, в общем разброс фантазии почти бесконечен.

Давайте напишем простенький скрипт (`hi_user.py`), который приветствует пользователя. Однако имя пользователя скрипт берёт из командной строки при запуске программы.

Модуль по работе с аргументами командной строки называется [`argparse`](https://docs.python.org/3/library/argparse.html). Импортируя его мы получаем доступ ко всем объектам и функциям этого модуля.

> Эта библиотека уже есть в стандартных, так что устанавливать дополнительно её не нужно.

```python
import argparser
```

Чтобы иметь возможность получать аргументы нам нужет объект парсера, имя экземпляру можно дать любое, но лучше, чтобы оно как-то отражало сущность объекта.

```python
parser = argparse.ArgumentParser()
```

Далее добавим аргумент для нашего парсера. Нужно указать как короткое, так и полное имя аргумента.

```python
parser.add_argument("-n", "--name", required=True, help="name of the user")
```

* `required` говорит о том, что этот аргумент обязательно должен быть указан при запуске скрипта.
* `help` - даёт дополнительную информацию в терминале. Чтобы увидеть информацию о доступных аргументах в терминале можно использовать следующую команду:

```shell
$ python3 hi_user.py --help

usage: hi_user.py [-h] -n NAME

optional arguments:
  -h, --help            show this help message and exit
  -n NAME, --name NAME  name of the user
```
В этой команде:
* `python3` - интерпретатор языка
* `hi_user.py` - название запускаемого скрипта
* `--help` - аргумент, который передаётся скрипту при его запуске

Чтобы получить данные из командной строки используется метод `parse_args()`. А чтобы превратить полученный объект в словарь, когда ключ - имя аргумента, а значение - это данные из командной строки, можно использовать функцию `vars`.

```python
args = vars(parser.parse_args())
print(args) # только, чтобы посмотреть что внутри args
```

Тогда если мы запустим нашу программу:

```shell
$ python3 hi_user.py -n Bob
```
Получим такой вот словарь (всё как и ожидалось):

```shell
{'name': 'Bob'}
```

Теперь осталось поприветствовать пользователя. Для этого весьма удобно использовать [f-string](https://python-scripts.com/f-strings) (этот инструмент появился в Python3.5).

```python
print(f"Hi there {args['name']}, it's nice to meet you!")
```

> Не забудьте убрать `print(args)`, чтобы не выводить лишнюю информацию

Ещё разок запускаем программу и видим приветствие:

```shell
$ python3 hi_user.py -n Leo

Hi there Leo, it's nice to meet you!
```

Вот и всё, можно делать сколько угодно аргументов и какие угодно.
